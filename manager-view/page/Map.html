<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="../css/font.css">
		<link rel="stylesheet" href="../css/xadmin.css">
		<link rel="stylesheet" href="../lib/layui/css/layui.css" media="all">
		<script src="../lib/js/jquery.min.js"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=FQcC2M0grq5DbvH12GvviUjQg21f0GQc"></script>
		<script type="text/javascript" src="../lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="../js/xadmin.js"></script>
		<script type="text/javascript" src="../js/util.js"></script>
	</head>
	<style type="text/css">
		body,
		html,
		#allmap {
			width: 100%;
			height: 100%;
			overflow: hidden;
			margin: 0;
			font-family: "微软雅黑";
		}
	</style>

	<body>
		<div class="layui-row" style="height: 90%;margin-bottom:10px auto; padding-bottom: 10px;">
			<div id="allmap"></div>
		</div>
		<form class="layui-form layui-col-md12" id="r-result">
			<div class="layui-input-inline">
				<input type="text" id="cityName" placeholder="城市名" autocomplete="off" class="layui-input">
			</div>
			<div class="layui-btn layui-btn layui-btn-normal" type="button" lay-filter="sreach" onclick="theLocation()"><i class="layui-icon">&#xe615;</i></div>
		</form>

		<script type="text/javascript">
			// 百度地图API功能
			var map = new BMap.Map("allmap");
			map.centerAndZoom("广州", 14);
			map.enableScrollWheelZoom(); //启用滚轮放大缩小，默认禁用
			map.enableContinuousZoom(); //单击获取点击的经纬度
			map.addEventListener("click", function(e) {
				alert('获取坐标成功！');
//				alert(e.point.lng + "," + e.point.lat);
				var mapPoint={
					'lng':e.point.lng,
					'lat':e.point.lat
				}
				sessionStorage.setItem('map',JSON.stringify(mapPoint));
			});

			function theLocation() {
				var city = document.getElementById("cityName").value;
				if(city != "") {
					map.centerAndZoom(city, 14); // 用城市名设置地图中心点
				}
			}
		</script>
	</body>

</html>